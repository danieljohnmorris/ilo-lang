{
  "meta": {
    "tools": ["mcp://self/classify"],
    "input": {"customers": "list customer"},
    "output": "list summary"
  },
  "steps": [
    {"for": "c", "in": "$.customers", "yield": [
      {"let": "level", "call": "mcp://self/classify", "with": {"spent": "${c.spent}"}},
      {"let": "disc", "match": "$level", "cases": {"gold": 20, "silver": 10, "bronze": 5}},
      {"obj": {"name": "${c.name}", "level": "$level", "discount": "$disc"}}
    ]}
  ]
}

{
  "meta": {
    "input": {"spent": "number"},
    "output": "text"
  },
  "steps": [
    {"if": {">=": ["$.spent", 1000]}, "ok": "gold"},
    {"if": {">=": ["$.spent", 500]}, "ok": "silver"},
    {"ok": "bronze"}
  ]
}
