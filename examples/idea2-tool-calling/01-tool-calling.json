{
  "description": "Approach 1: Extended tool calling. ilo as a sequence of tool calls with flow control, built on top of the function-calling format agents already generate.",

  "program": [
    {
      "id": "1",
      "call": "get-user",
      "args": {"user-id": "$input.user-id"},
      "on-error": {"return": {"error": "Lookup failed: $error"}}
    },
    {
      "id": "2",
      "if": {"not": "$1.verified"},
      "return": {"error": "Email not verified"}
    },
    {
      "id": "3",
      "call": "send-email",
      "args": {
        "to": "$1.email",
        "subject": "Notification",
        "body": "$input.message"
      },
      "on-error": {"return": {"error": "Send failed: $error"}}
    },
    {
      "return": {"ok": null}
    }
  ],

  "notes": "Agents already generate JSON for tool calls. This extends that with $references for data flow, on-error for handling, and sequencing. The runtime is a step executor. No new syntax to learn â€” just JSON with conventions."
}
