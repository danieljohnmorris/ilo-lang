[
  {
    "idea": "idea1",
    "test_type": "rules",
    "task": "workflow",
    "output": "fn transfer from: text to: text amount: number -> result text, text\n  let withdraw_result = tool withdraw from amount\n  match withdraw_result\n    ok withdrawal_id:\n      let deposit_result = tool deposit to amount\n      match deposit_result\n        ok deposit_id:\n          let receipt = \"Transfer receipt\\nFrom: \" + from + \"\\nTo: \" + to + \"\\nAmount: \" + (show amount) + \"\\nWithdrawal ID: \" + withdrawal_id + \"\\nDeposit ID: \" + deposit_id\n          ok receipt\n        err deposit_error:\n          let refund_result = tool refund from amount\n          match refund_result\n            ok:\n              err (\"Deposit failed: \" + deposit_error + \". Refund processed.\")\n            err refund_error:\n              err (\"Deposit failed: \" + deposit_error + \". Refund also failed: \" + refund_error)\n    err withdraw_error:\n      err (\"Withdrawal failed: \" + withdraw_error)\n\ntool withdraw \"Withdraw funds from an account\"\ntool deposit \"Deposit funds to an account\"\ntool refund \"Refund funds back to an account\"\n\n? transfer \"account1\" \"account2\" 100\n  ok \"Transfer receipt\\nFrom: account1\\nTo: account2\\nAmount: 100\\nWithdrawal ID: w123\\nDeposit ID: d456\"",
    "prompt_tokens": 352,
    "output_tokens": 274,
    "elapsed_s": 3.08,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "type Order\n  id: string\n  customer-id: string\n  total: float\n\ntype Customer\n  name: string\n  email: string\n  tier: string\n\ntype EnrichedOrder\n  id: string\n  customer-name: string\n  customer-email: string\n  original-total: float\n  discount-amount: float\n  final-total: float\n\ntool lookup-customer \"Fetches customer data by ID\"\n\nfn calculate-discount: tier: string -> float\n  match tier\n    \"gold\"\n      0.20\n    \"silver\"\n      0.10\n    _\n      0.0\n\nfn enrich-order: order: Order -> result EnrichedOrder, string\n  let customer-result = lookup-customer order.customer-id\n  match customer-result\n    ok customer: Customer\n      let discount-rate = calculate-discount customer.tier\n      let discount-amount = order.total * discount-rate\n      let final-total = order.total - discount-amount\n      ok\n        id: order.id\n        customer-name: customer.name\n        customer-email: customer.email\n        original-total: order.total\n        discount-amount: discount-amount\n        final-total: final-total\n    err msg: string\n      err msg\n\nfn enrich: orders: list Order -> list EnrichedOrder\n  let results = for order in orders\n    match enrich-order order\n      ok enriched: EnrichedOrder\n        enriched\n      err _\n        -- skip orders with lookup failures\n  results",
    "prompt_tokens": 346,
    "output_tokens": 319,
    "elapsed_s": 3.24,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "fn approve income: number, debt: number, score: number, amount: number -> result {approved: {amount: number, rate: number, monthly_payment: number}, rejected: {reason: string}}\n    match score < 500\n        true\n            err {reason: \"Credit score too low\"}\n        false\n            let ratio = debt / income\n            match ratio > 0.4\n                true\n                    err {reason: \"Debt ratio too high\"}\n                false\n                    let max_loan = income * 5\n                    match amount > max_loan\n                        true\n                            err {reason: \"Amount exceeds limit\"}\n                        false\n                            let rate = match score > 750\n                                true\n                                    3.5\n                                false\n                                    match score > 650\n                                        true\n                                            5.0\n                                        false\n                                            7.5\n                            let monthly = amount * rate / 100 / 12\n                            ok {amount: amount, rate: rate, monthly_payment: monthly}\n\n? approve 50000 10000 550 100000 == err {reason: \"Amount exceeds limit\"}\n? approve 50000 10000 450 50000 == err {reason: \"Credit score too low\"}\n? approve 50000 30000 650 100000 == err {reason: \"Debt ratio too high\"}\n? approve 100000 20000 800 200000 == ok {amount: 200000, rate: 3.5, monthly_payment: 583.333333}\n? approve 80000 24000 700 150000 == ok {amount: 150000, rate: 5.0, monthly_payment: 625.0}\n? approve 60000 15000 600 200000 == ok {amount: 200000, rate: 7.5, monthly_payment: 1250.0}",
    "prompt_tokens": 400,
    "output_tokens": 397,
    "elapsed_s": 3.16,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": true,
      "returns_approved": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "fn deploy service: text, version: text, environment: text -> result text, text\n  -- Step 1: Check health before deployment\n  let health_check_result = tool health-check service environment\n  match health_check_result\n    err msg\n      err \"Service unhealthy\"\n    ok _\n      -- Step 2: Create snapshot for backup\n      let snapshot_result = tool create-snapshot service environment\n      match snapshot_result\n        err msg\n          err msg\n        ok snapshot_data\n          let snapshot_id = snapshot_data\n          -- Step 3: Roll out new version\n          let rollout_result = tool roll-out service version environment\n          match rollout_result\n            err rollout_msg\n              -- Rollback on failure\n              let restore_result = tool restore-snapshot snapshot_id\n              err rollout_msg\n            ok _\n              -- Step 4: Check health after deployment\n              let health_check_after = tool health-check service environment\n              match health_check_after\n                err msg\n                  -- Rollback if health check fails\n                  let restore_result = tool restore-snapshot snapshot_id\n                  err \"Deploy failed health check\"\n                ok _\n                  -- Step 5: Success\n                  ok (\"Deployed \" ++ service ++ \" v\" ++ version ++ \" to \" ++ environment ++ \" (snapshot: \" ++ snapshot_id ++ \")\")\n\ntool health-check \"Checks service health status\"\n  timeout: 30\n  retry: 3\n\ntool create-snapshot \"Creates a backup snapshot before deployment\"\n  timeout: 60\n  retry: 2\n\ntool roll-out \"Rolls out a new version to the specified environment\"\n  timeout: 120\n  retry: 1\n\ntool restore-snapshot \"Restores a service from a snapshot\"\n  timeout: 90\n  retry: 2\n\n-- Test cases\n? deploy \"api\" \"2.0.0\" \"prod\" == ok \"Deployed api v2.0.0 to prod (snapshot: snap-12345)\"\n? deploy \"web\" \"1.5.0\" \"staging\" == ok \"Deployed web v1.5.0 to staging (snapshot: snap-67890)\"",
    "prompt_tokens": 402,
    "output_tokens": 451,
    "elapsed_s": 4.9,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1-compact",
    "test_type": "rules",
    "task": "workflow",
    "output": "fn transfer(from_account:text, to_account:text, amount:number)->result{withdraw_result=withdraw(from_account, amount);match withdraw_result{ok withdraw_tx: {deposit_result=deposit(to_account, amount);match deposit_result{ok deposit_tx: ok{from:from_account;to:to_account;amount:amount;withdraw_id:withdraw_tx;deposit_id:deposit_tx};err e: {refund(from_account, amount);err e}};err e: err e}}",
    "prompt_tokens": 368,
    "output_tokens": 98,
    "elapsed_s": 1.63,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1-compact",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "type order{id;customer-id;total}\ntype customer{name;email;tier}\ntype enriched-order{id;customer-name;customer-email;original-total;discount;final-total}\n\ntool lookup-customer\"Fetch customer data by ID\"(customer-id)->customer timeout:5,retry:2\n\nfn calculate-discount(tier)->number; match tier{gold:0.20;silver:0.10;_:0.0}\n\nfn enrich(orders)->enriched-order[]; result=[]; for order in orders{ match lookup-customer(order.customer-id){ok customer: discount-rate=calculate-discount(customer.tier); discount-amount=order.total*discount-rate; final=order.total-discount-amount; enriched=enriched-order{id:order.id;customer-name:customer.name;customer-email:customer.email;original-total:order.total;discount:discount-amount;final-total:final}; result=result+[enriched];err _:{};}; ok result}",
    "prompt_tokens": 362,
    "output_tokens": 201,
    "elapsed_s": 3.06,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1-compact",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "type ApprovalResult{amount:num;rate:num;monthly:num}; fn approve(income:num,debt:num,score:num,amount:num)->(ApprovalResult|str){score<500?err\"Credit score too low\";debt_ratio=debt/income;debt_ratio>0.4?err\"Debt ratio too high\";max_loan=income*5;amount>max_loan?err\"Amount exceeds limit\";rate=match score{s if s>750:3.5;s if s>650:5.0;_:7.5};monthly=amount*rate/100/12;ok ApprovalResult{amount:amount;rate:rate;monthly:monthly}}; ?approve(60000,15000,720,200000)->(ApprovalResult|str){ok ApprovalResult{amount:200000;rate:3.5;monthly:583.33}}; ?approve(50000,25000,580,100000)->(ApprovalResult|str){err\"Debt ratio too high\"}; ?approve(40000,5000,450,50000)->(ApprovalResult|str){err\"Credit score too low\"};",
    "prompt_tokens": 416,
    "output_tokens": 243,
    "elapsed_s": 2.57,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": true,
      "returns_approved": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea1-compact",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "fn deploy(service,version,environment)->Result{step1=health-check(service,environment);match step1{ok _->{step2=create-snapshot(service,environment);match step2{ok snapshot_id->{step3=roll-out(service,version,environment);match step3{ok _->{step4=health-check(service,environment);match step4{ok _->{ok{service:service,version:version,environment:environment,snapshot_id:snapshot_id}};err e->{restore-snapshot(snapshot_id);err\"Deploy failed health check\"}}};err e->{restore-snapshot(snapshot_id);err e}}};err e->{err e}}};err e->{err\"Service unhealthy\"}}}",
    "prompt_tokens": 418,
    "output_tokens": 144,
    "elapsed_s": 2.39,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea2-tool-calling",
    "test_type": "rules",
    "task": "workflow",
    "output": "```json\n{\n  \"name\": \"transfer\",\n  \"description\": \"Transfer money between accounts with automatic rollback on failure\",\n  \"input\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"from-account\": {\n        \"type\": \"string\",\n        \"description\": \"Source account identifier\"\n      },\n      \"to-account\": {\n        \"type\": \"string\",\n        \"description\": \"Destination account identifier\"\n      },\n      \"amount\": {\n        \"type\": \"number\",\n        \"description\": \"Amount to transfer\"\n      }\n    },\n    \"required\": [\"from-account\", \"to-account\", \"amount\"]\n  },\n  \"steps\": [\n    {\n      \"id\": \"step-1-withdraw\",\n      \"tool\": \"withdraw\",\n      \"description\": \"Withdraw from source account\",\n      \"input\": {\n        \"account\": \"$references.input.from-account\",\n        \"amount\": \"$references.input.amount\"\n      },\n      \"on-error\": {\n        \"action\": \"return\",\n        \"output\": {\n          \"success\": false,\n          \"error\": \"$references.step-1-withdraw.error\"\n        }\n      }\n    },\n    {\n      \"id\": \"step-2-deposit\",\n      \"tool\": \"deposit\",\n      \"description\": \"Deposit to destination account\",\n      \"input\": {\n        \"account\": \"$references.input.to-account\",\n        \"amount\": \"$references.input.amount\"\n      },\n      \"on-error\": {\n        \"action\": \"compensate\",\n        \"compensate\": [\n          {\n            \"tool\": \"refund\",\n            \"input\": {\n              \"account\": \"$references.input.from-account\",\n              \"amount\": \"$references.input.amount\",\n              \"original-transaction-id\": \"$references.step-1-withdraw.transaction-id\"\n            }\n          }\n        ],\n        \"then\": {\n          \"action\": \"return\",\n          \"output\": {\n            \"success\": false,\n            \"error\": \"$references.step-2-deposit.error\",\n            \"note\": \"Withdrawal was refunded due to deposit failure\"\n          }\n        }\n      }\n    },\n    {\n      \"id\": \"step-3-return-receipt\",\n      \"tool\": \"none\",\n      \"description\": \"Return success receipt\",\n      \"output\": {\n        \"success\": true,\n        \"receipt\": {\n          \"from-account\": \"$references.input.from-account\",\n          \"to-account\": \"$references.input.to-account\",\n          \"amount\": \"$references.input.amount\",\n          \"withdraw-transaction-id\": \"$references.step-1-withdraw.transaction-id\",\n          \"deposit-transaction-id\": \"$references.step-2-deposit.transaction-id\"\n        }\n      }\n    }\n  ]\n}\n```",
    "prompt_tokens": 274,
    "output_tokens": 550,
    "elapsed_s": 3.52,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea2-tool-calling",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "```json\n{\n  \"program\": \"enrich\",\n  \"description\": \"Enriches orders with customer data and calculates discounts based on tier\",\n  \"input\": {\n    \"orders\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": \"string\",\n          \"customer-id\": \"string\",\n          \"total\": \"number\"\n        }\n      }\n    }\n  },\n  \"steps\": [\n    {\n      \"id\": \"init\",\n      \"type\": \"assign\",\n      \"value\": {\n        \"enriched\": [],\n        \"index\": 0\n      }\n    },\n    {\n      \"id\": \"loop\",\n      \"type\": \"while\",\n      \"condition\": \"$references.index < $references.orders.length\",\n      \"steps\": [\n        {\n          \"id\": \"get_current_order\",\n          \"type\": \"assign\",\n          \"value\": \"$references.orders[$references.index]\"\n        },\n        {\n          \"id\": \"lookup_customer\",\n          \"type\": \"tool\",\n          \"tool\": \"lookup-customer\",\n          \"input\": {\n            \"customer-id\": \"$references.get_current_order.customer-id\"\n          },\n          \"on-error\": {\n            \"type\": \"continue\",\n            \"compensate\": []\n          }\n        },\n        {\n          \"id\": \"calculate_discount\",\n          \"type\": \"assign\",\n          \"condition\": \"$references.lookup_customer.status == 'success'\",\n          \"value\": {\n            \"tier\": \"$references.lookup_customer.tier\",\n            \"rate\": {\n              \"if\": \"$references.lookup_customer.tier == 'gold'\",\n              \"then\": 0.20,\n              \"else\": {\n                \"if\": \"$references.lookup_customer.tier == 'silver'\",\n                \"then\": 0.10,\n                \"else\": 0.0\n              }\n            }\n          }\n        },\n        {\n          \"id\": \"compute_amounts\",\n          \"type\": \"assign\",\n          \"condition\": \"$references.lookup_customer.status == 'success'\",\n          \"value\": {\n            \"discount_amount\": \"$references.get_current_order.total * $references.calculate_discount.rate\",\n            \"final_total\": \"$references.get_current_order.total * (1 - $references.calculate_discount.rate)\"\n          }\n        },\n        {\n          \"id\": \"build_enriched_order\",\n          \"type\": \"assign\",\n          \"condition\": \"$references.lookup_customer.status == 'success'\",\n          \"value\": {\n            \"id\": \"$references.get_current_order.id\",\n            \"customer-id\": \"$references.get_current_order.customer-id\",\n            \"customer-name\": \"$references.lookup_customer.name\",\n            \"customer-email\": \"$references.lookup_customer.email\",\n            \"tier\": \"$references.calculate_discount.tier\",\n            \"original-total\": \"$references.get_current_order.total\",\n            \"discount-amount\": \"$references.compute_amounts.discount_amount\",\n            \"final-total\": \"$references.compute_amounts.final_total\"\n          }\n        },\n        {\n          \"id\": \"append_enriched\",\n          \"type\": \"assign\",\n          \"condition\": \"$references.lookup_customer.status == 'success'\",\n          \"value\": {\n            \"enriched\": \"$references.enriched.concat([$references.build_enriched_order])\"\n          }\n        },\n        {\n          \"id\": \"increment_index\",\n          \"type\": \"assign\",\n          \"value\": {\n            \"index\": \"$references.index + 1\"\n          }\n        }\n      ]\n    },\n    {\n      \"id\": \"return_result\",\n      \"type\": \"return\",\n      \"value\": \"$references.enriched\"\n    }\n  ]\n}\n```",
    "prompt_tokens": 268,
    "output_tokens": 746,
    "elapsed_s": 4.85,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea2-tool-calling",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "```json\n{\n  \"program\": \"approve\",\n  \"input\": {\n    \"income\": \"number\",\n    \"debt\": \"number\",\n    \"score\": \"number\",\n    \"amount\": \"number\"\n  },\n  \"steps\": [\n    {\n      \"id\": \"check_credit_score\",\n      \"tool\": \"evaluate\",\n      \"params\": {\n        \"condition\": \"$input.score < 500\"\n      },\n      \"on-error\": {\n        \"action\": \"continue\"\n      }\n    },\n    {\n      \"id\": \"reject_low_score\",\n      \"tool\": \"conditional\",\n      \"condition\": \"$steps.check_credit_score.result == true\",\n      \"then\": {\n        \"tool\": \"return\",\n        \"value\": {\n          \"approved\": false,\n          \"reason\": \"Credit score too low\"\n        }\n      }\n    },\n    {\n      \"id\": \"calculate_debt_ratio\",\n      \"tool\": \"calculate\",\n      \"params\": {\n        \"operation\": \"divide\",\n        \"numerator\": \"$input.debt\",\n        \"denominator\": \"$input.income\"\n      }\n    },\n    {\n      \"id\": \"check_debt_ratio\",\n      \"tool\": \"evaluate\",\n      \"params\": {\n        \"condition\": \"$steps.calculate_debt_ratio.result > 0.4\"\n      }\n    },\n    {\n      \"id\": \"reject_high_debt\",\n      \"tool\": \"conditional\",\n      \"condition\": \"$steps.check_debt_ratio.result == true\",\n      \"then\": {\n        \"tool\": \"return\",\n        \"value\": {\n          \"approved\": false,\n          \"reason\": \"Debt ratio too high\"\n        }\n      }\n    },\n    {\n      \"id\": \"calculate_max_loan\",\n      \"tool\": \"calculate\",\n      \"params\": {\n        \"operation\": \"multiply\",\n        \"left\": \"$input.income\",\n        \"right\": 5\n      }\n    },\n    {\n      \"id\": \"check_amount_limit\",\n      \"tool\": \"evaluate\",\n      \"params\": {\n        \"condition\": \"$input.amount > $steps.calculate_max_loan.result\"\n      }\n    },\n    {\n      \"id\": \"reject_amount_exceeded\",\n      \"tool\": \"conditional\",\n      \"condition\": \"$steps.check_amount_limit.result == true\",\n      \"then\": {\n        \"tool\": \"return\",\n        \"value\": {\n          \"approved\": false,\n          \"reason\": \"Amount exceeds limit\"\n        }\n      }\n    },\n    {\n      \"id\": \"determine_rate\",\n      \"tool\": \"conditional\",\n      \"condition\": \"$input.score > 750\",\n      \"then\": {\n        \"value\": 3.5\n      },\n      \"else\": {\n        \"tool\": \"conditional\",\n        \"condition\": \"$input.score > 650\",\n        \"then\": {\n          \"value\": 5.0\n        },\n        \"else\": {\n          \"value\": 7.5\n        }\n      }\n    },\n    {\n      \"id\": \"calculate_monthly_payment\",\n      \"tool\": \"calculate\",\n      \"params\": {\n        \"operation\": \"monthlyPayment\",\n        \"amount\": \"$input.amount\",\n        \"rate\": \"$steps.determine_rate.result\"\n      }\n    },\n    {\n      \"id\": \"approve_loan\",\n      \"tool\": \"return\",\n      \"value\": {\n        \"approved\": true,\n        \"amount\": \"$input.amount\",\n        \"rate\": \"$steps.determine_rate.result\",\n        \"monthly_payment\": \"$steps.calculate_monthly_payment.result\"\n      }\n    }\n  ]\n}\n```",
    "prompt_tokens": 322,
    "output_tokens": 737,
    "elapsed_s": 4.74,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": false,
      "returns_approved": true
    },
    "score": "9/10"
  },
  {
    "idea": "idea2-tool-calling",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "```json\n{\n  \"name\": \"deploy\",\n  \"description\": \"Deploys a service with health checks and rollback capability\",\n  \"parameters\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"service\": {\n        \"type\": \"string\",\n        \"description\": \"Name of the service to deploy\"\n      },\n      \"version\": {\n        \"type\": \"string\",\n        \"description\": \"Version to deploy\"\n      },\n      \"environment\": {\n        \"type\": \"string\",\n        \"description\": \"Target environment (e.g., staging, production)\"\n      }\n    },\n    \"required\": [\"service\", \"version\", \"environment\"]\n  },\n  \"steps\": [\n    {\n      \"id\": \"check-health-pre\",\n      \"tool\": \"health-check\",\n      \"description\": \"Verify service health before deployment\",\n      \"parameters\": {\n        \"service\": \"$parameters.service\",\n        \"environment\": \"$parameters.environment\"\n      },\n      \"on-error\": {\n        \"action\": \"return\",\n        \"value\": {\n          \"success\": false,\n          \"error\": \"Service unhealthy\"\n        }\n      }\n    },\n    {\n      \"id\": \"create-backup\",\n      \"tool\": \"create-snapshot\",\n      \"description\": \"Create snapshot before deployment\",\n      \"parameters\": {\n        \"service\": \"$parameters.service\",\n        \"environment\": \"$parameters.environment\"\n      },\n      \"on-error\": {\n        \"action\": \"return\",\n        \"value\": {\n          \"success\": false,\n          \"error\": \"Failed to create snapshot\"\n        }\n      }\n    },\n    {\n      \"id\": \"rollout\",\n      \"tool\": \"roll-out\",\n      \"description\": \"Deploy the new version\",\n      \"parameters\": {\n        \"service\": \"$parameters.service\",\n        \"version\": \"$parameters.version\",\n        \"environment\": \"$parameters.environment\"\n      },\n      \"compensate\": {\n        \"tool\": \"restore-snapshot\",\n        \"parameters\": {\n          \"snapshot-id\": \"$steps.create-backup.snapshot-id\"\n        }\n      },\n      \"on-error\": {\n        \"action\": \"compensate-then-return\",\n        \"value\": {\n          \"success\": false,\n          \"error\": \"$steps.rollout.error\"\n        }\n      }\n    },\n    {\n      \"id\": \"check-health-post\",\n      \"tool\": \"health-check\",\n      \"description\": \"Verify service health after deployment\",\n      \"parameters\": {\n        \"service\": \"$parameters.service\",\n        \"environment\": \"$parameters.environment\"\n      },\n      \"on-error\": {\n        \"action\": \"compensate-then-return\",\n        \"compensate-tool\": \"restore-snapshot\",\n        \"compensate-params\": {\n          \"snapshot-id\": \"$steps.create-backup.snapshot-id\"\n        },\n        \"value\": {\n          \"success\": false,\n          \"error\": \"Deploy failed health check\"\n        }\n      }\n    },\n    {\n      \"id\": \"success\",\n      \"tool\": \"return\",\n      \"description\": \"Return successful deployment result\",\n      \"parameters\": {\n        \"success\": true,\n        \"service\": \"$parameters.service\",\n        \"version\": \"$parameters.version\",\n        \"environment\": \"$parameters.environment\",\n        \"snapshot-id\": \"$steps.create-backup.snapshot-id\"\n      }\n    }\n  ]\n}\n```",
    "prompt_tokens": 324,
    "output_tokens": 686,
    "elapsed_s": 3.92,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea3-constrained-decoding",
    "test_type": "rules",
    "task": "workflow",
    "output": "```json\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"program\": {\n      \"type\": \"string\",\n      \"enum\": [\"transfer\"]\n    },\n    \"parameters\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"from_account\": {\n          \"type\": \"string\"\n        },\n        \"to_account\": {\n          \"type\": \"string\"\n        },\n        \"amount\": {\n          \"type\": \"number\",\n          \"minimum\": 0\n        }\n      },\n      \"required\": [\"from_account\", \"to_account\", \"amount\"]\n    },\n    \"steps\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"call_tool\"]\n              },\n              \"tool\": {\n                \"type\": \"string\",\n                \"enum\": [\"withdraw\"]\n              },\n              \"arguments\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"account\": {\n                    \"type\": \"string\"\n                  },\n                  \"amount\": {\n                    \"type\": \"number\"\n                  }\n                },\n                \"required\": [\"account\", \"amount\"]\n              },\n              \"assign_to\": {\n                \"type\": \"string\"\n              }\n            },\n            \"required\": [\"action\", \"tool\", \"arguments\", \"assign_to\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"call_tool\"]\n              },\n              \"tool\": {\n                \"type\": \"string\",\n                \"enum\": [\"deposit\"]\n              },\n              \"arguments\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"account\": {\n                    \"type\": \"string\"\n                  },\n                  \"amount\": {\n                    \"type\": \"number\"\n                  }\n                },\n                \"required\": [\"account\", \"amount\"]\n              },\n              \"assign_to\": {\n                \"type\": \"string\"\n              }\n            },\n            \"required\": [\"action\", \"tool\", \"arguments\", \"assign_to\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"call_tool\"]\n              },\n              \"tool\": {\n                \"type\": \"string\",\n                \"enum\": [\"refund\"]\n              },\n              \"arguments\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"account\": {\n                    \"type\": \"string\"\n                  },\n                  \"amount\": {\n                    \"type\": \"number\"\n                  }\n                },\n                \"required\": [\"account\", \"amount\"]\n              }\n            },\n            \"required\": [\"action\", \"tool\", \"arguments\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"if\"]\n              },\n              \"condition\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"variable\": {\n                    \"type\": \"string\"\n                  },\n                  \"operator\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"is_error\"]\n                  }\n                },\n                \"required\": [\"variable\", \"operator\"]\n              },\n              \"then_return\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"status\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"error\"]\n                  },\n                  \"error_message\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"required\": [\"status\", \"error_message\"]\n              }\n            },\n            \"required\": [\"action\", \"condition\", \"then_return\"]\n          },\n          {\n            \"type\": \"object\",",
    "prompt_tokens": 314,
    "output_tokens": 799,
    "elapsed_s": 4.41,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea3-constrained-decoding",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "```json\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"program\": {\n      \"type\": \"string\",\n      \"enum\": [\"enrich\"]\n    },\n    \"input\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"orders\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"id\": {\"type\": \"string\"},\n              \"customer_id\": {\"type\": \"string\"},\n              \"total\": {\"type\": \"number\"}\n            },\n            \"required\": [\"id\", \"customer_id\", \"total\"]\n          }\n        }\n      },\n      \"required\": [\"orders\"]\n    },\n    \"steps\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\"type\": \"string\", \"enum\": [\"tool\"]},\n              \"tool\": {\"type\": \"string\", \"enum\": [\"lookup-customer\"]},\n              \"params\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"customer_id\": {\"type\": \"string\"}\n                },\n                \"required\": [\"customer_id\"]\n              },\n              \"result_var\": {\"type\": \"string\"}\n            },\n            \"required\": [\"action\", \"tool\", \"params\", \"result_var\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\"type\": \"string\", \"enum\": [\"compute\"]},\n              \"compute\": {\"type\": \"string\"},\n              \"result_var\": {\"type\": \"string\"}\n            },\n            \"required\": [\"action\", \"compute\", \"result_var\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\"type\": \"string\", \"enum\": [\"conditional\"]},\n              \"condition\": {\"type\": \"string\"},\n              \"then_steps\": {\"type\": \"array\"},\n              \"else_steps\": {\"type\": \"array\"}\n            },\n            \"required\": [\"action\", \"condition\", \"then_steps\", \"else_steps\"]\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"action\": {\"type\": \"string\", \"enum\": [\"loop\"]},\n              \"over\": {\"type\": \"string\"},\n              \"loop_var\": {\"type\": \"string\"},\n              \"steps\": {\"type\": \"array\"}\n            },\n            \"required\": [\"action\", \"over\", \"loop_var\", \"steps\"]\n          }\n        ]\n      }\n    },\n    \"output\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"enriched_orders\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"id\": {\"type\": \"string\"},\n              \"customer_name\": {\"type\": \"string\"},\n              \"email\": {\"type\": \"string\"},\n              \"original_total\": {\"type\": \"number\"},\n              \"discount_amount\": {\"type\": \"number\"},\n              \"final_total\": {\"type\": \"number\"}\n            },\n            \"required\": [\"id\", \"customer_name\", \"email\", \"original_total\", \"discount_amount\", \"final_total\"]\n          }\n        }\n      },\n      \"required\": [\"enriched_orders\"]\n    }\n  },\n  \"required\": [\"program\", \"input\", \"steps\", \"output\"]\n}\n```\n\n```json\n{\n  \"program\": \"enrich\",\n  \"input\": {\n    \"orders\": []\n  },\n  \"steps\": [\n    {\n      \"action\": \"compute\",\n      \"compute\": \"enriched_orders = []\",\n      \"result_var\": \"enriched_orders\"\n    },\n    {\n      \"action\": \"loop\",\n      \"over\": \"orders\",\n      \"loop_var\": \"order\",\n      \"steps\": [\n        {\n          \"action\": \"tool\",\n          \"tool\": \"lookup-customer\",\n          \"params\": {\n            \"customer",
    "prompt_tokens": 308,
    "output_tokens": 850,
    "elapsed_s": 4.86,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": false,
      "tier_check": false,
      "calculates_discount": false,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "7/10"
  },
  {
    "idea": "idea3-constrained-decoding",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "```json\n{\n  \"type\": \"object\",\n  \"properties\": {\n    \"approve\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"income\": {\n          \"type\": \"number\",\n          \"description\": \"Annual income\"\n        },\n        \"debt\": {\n          \"type\": \"number\",\n          \"description\": \"Total existing debt\"\n        },\n        \"score\": {\n          \"type\": \"number\",\n          \"description\": \"Credit score\"\n        },\n        \"amount\": {\n          \"type\": \"number\",\n          \"description\": \"Loan amount requested\"\n        }\n      },\n      \"required\": [\"income\", \"debt\", \"score\", \"amount\"]\n    }\n  }\n}\n```\n\n```python\nimport json\nfrom typing import Union\n\ndef approve(income: float, debt: float, score: float, amount: float) -> dict:\n    \"\"\"\n    Decides whether to approve a loan based on credit rules.\n    \n    Args:\n        income: Annual income (number)\n        debt: Total existing debt (number)\n        score: Credit score (number)\n        amount: Loan amount requested (number)\n    \n    Returns:\n        dict with approval details or rejection reason\n    \"\"\"\n    \n    # Rule 1: Check credit score\n    if score < 500:\n        return {\n            \"approved\": False,\n            \"reason\": \"Credit score too low\"\n        }\n    \n    # Rule 2: Check debt-to-income ratio\n    debt_ratio = debt / income if income > 0 else float('inf')\n    if debt_ratio > 0.4:\n        return {\n            \"approved\": False,\n            \"reason\": \"Debt ratio too high\"\n        }\n    \n    # Rule 3: Check against max loan limit\n    max_loan = income * 5\n    if amount > max_loan:\n        return {\n            \"approved\": False,\n            \"reason\": \"Amount exceeds limit\"\n        }\n    \n    # Rule 4: All checks passed - calculate approval with rate and payment\n    if score > 750:\n        rate = 3.5\n    elif score > 650:\n        rate = 5.0\n    else:\n        rate = 7.5\n    \n    monthly_payment = (amount * rate / 100) / 12\n    \n    return {\n        \"approved\": True,\n        \"amount\": amount,\n        \"rate\": rate,\n        \"monthly_payment\": round(monthly_payment, 2)\n    }\n\n\n# Test cases\nif __name__ == \"__main__\":\n    print(approve(50000, 25000, 550, 100000))\n    print(approve(50000, 25000, 700, 100000))\n    print(approve(50000, 30000, 700, 100000))\n    print(approve(50000, 15000, 700, 300000))\n    print(approve(50000, 15000, 700, 200000))\n```",
    "prompt_tokens": 362,
    "output_tokens": 620,
    "elapsed_s": 3.91,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": true,
      "returns_approved": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea3-constrained-decoding",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "```json\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"program\": {\n      \"type\": \"string\",\n      \"enum\": [\"deploy\"]\n    },\n    \"inputs\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"service\": {\n          \"type\": \"string\",\n          \"description\": \"The name of the service to deploy\"\n        },\n        \"version\": {\n          \"type\": \"string\",\n          \"description\": \"The version to deploy\"\n        },\n        \"environment\": {\n          \"type\": \"string\",\n          \"description\": \"The target environment\"\n        }\n      },\n      \"required\": [\"service\", \"version\", \"environment\"],\n      \"additionalProperties\": false\n    },\n    \"steps\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"oneOf\": [\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"step\": {\n                \"type\": \"integer\",\n                \"enum\": [1]\n              },\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"tool-call\"]\n              },\n              \"tool\": {\n                \"type\": \"string\",\n                \"enum\": [\"health-check\"]\n              },\n              \"inputs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"service\": {\n                    \"type\": \"string\"\n                  },\n                  \"environment\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"required\": [\"service\", \"environment\"],\n                \"additionalProperties\": false\n              }\n            },\n            \"required\": [\"step\", \"action\", \"tool\", \"inputs\"],\n            \"additionalProperties\": false\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"step\": {\n                \"type\": \"integer\",\n                \"enum\": [1]\n              },\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"conditional\"]\n              },\n              \"condition\": {\n                \"type\": \"string\",\n                \"enum\": [\"health_check_failed\"]\n              },\n              \"then\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"action\": {\n                    \"type\": \"string\",\n                    \"enum\": [\"return\"]\n                  },\n                  \"result\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                      \"error\": {\n                        \"type\": \"string\",\n                        \"enum\": [\"Service unhealthy\"]\n                      }\n                    },\n                    \"required\": [\"error\"],\n                    \"additionalProperties\": false\n                  }\n                },\n                \"required\": [\"action\", \"result\"],\n                \"additionalProperties\": false\n              }\n            },\n            \"required\": [\"step\", \"action\", \"condition\", \"then\"],\n            \"additionalProperties\": false\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"step\": {\n                \"type\": \"integer\",\n                \"enum\": [2]\n              },\n              \"action\": {\n                \"type\": \"string\",\n                \"enum\": [\"tool-call\"]\n              },\n              \"tool\": {\n                \"type\": \"string\",\n                \"enum\": [\"create-snapshot\"]\n              },\n              \"inputs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                  \"service\": {\n                    \"type\": \"string\"\n                  },\n                  \"environment\": {\n                    \"type\": \"string\"\n                  }\n                },\n                \"required\": [\"service\", \"environment\"],\n                \"additionalProperties\": false\n              },\n              \"store_result_as\": {\n                \"type\": \"string\",\n                \"enum\": [\"snapshot_id\"]\n              }\n            },\n            \"required\": [\"step\", \"action\", \"tool\", \"inputs\", \"store_result_as\"],\n            \"additionalProperties\": false\n          },\n          {\n            \"type\": \"object\",\n            \"properties\": {\n              \"step\": {\n                \"type\": \"integer\",",
    "prompt_tokens": 364,
    "output_tokens": 814,
    "elapsed_s": 4.39,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": false,
      "stores_snapshot_id": true,
      "handles_rollout_fail": false,
      "rollback_on_fail": false,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "7/10"
  },
  {
    "idea": "idea4-ast-bytecode",
    "test_type": "rules",
    "task": "workflow",
    "output": "0 0 [0:input.0 1:input.2]\n1 [!3.5] 3 \"Withdrawal failed\"\n0 1 [0:input.1 1:input.2]\n1 [!4.5] 0 2 [0:input.0 1:input.2]\n1 [!5.5] 3 \"Deposit failed, refund initiated\"\n5 [0:input.0 1:input.1 2:input.2 3:3.5 4:4.5]\n2",
    "prompt_tokens": 592,
    "output_tokens": 119,
    "elapsed_s": 1.7,
    "features": {
      "named_transfer": false,
      "three_inputs": false,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": false,
      "receipt_has_both_ids": true
    },
    "score": "7/10"
  },
  {
    "idea": "idea4-ast-bytecode",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "0 0 [0:input.0]\n4 [0.0]\n1 [5:0] 2\n0 1 [1:4.0]\n1 [!3.1] 3 \"lookup failed\"\n1 [5:4.2 5:\"gold\"] 5 0.2 6 0.1\n1 [5:4.2 5:\"gold\"] 0 7 [1:5]\n1 [5:4.2 5:\"silver\"] 0 7 [1:6]\n0 7 [1:0]\n2",
    "prompt_tokens": 586,
    "output_tokens": 124,
    "elapsed_s": 1.91,
    "features": {
      "named_enrich": false,
      "takes_orders": false,
      "iterates": false,
      "calls_lookup": false,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": false,
      "includes_final_total": false,
      "includes_customer_data": false
    },
    "score": "3/10"
  },
  {
    "idea": "idea4-ast-bytecode",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "0 0 [0:input.0]\n1 [!4.2] 3 \"Credit score too low\"\n0 0 [0:input.1 1:input.0]\n5 0.4\n1 [4.1>5.0] 3 \"Debt ratio too high\"\n0 0 [0:input.0 1:5]\n5 5\n1 [4.0>4.1] 3 \"Amount exceeds limit\"\n0 0 [0:input.2]\n5 750\n1 [4.0>5.0] 0 [0:input.3 3:3.5]\n5 650\n1 [4.0>5.1] 0 [0:input.3 3:5.0]\n0 [0:input.3 3:7.5]\n0 0 [0:input.3 1:4.0 2:4.1]\n2",
    "prompt_tokens": 640,
    "output_tokens": 206,
    "elapsed_s": 2.27,
    "features": {
      "named_approve": false,
      "four_inputs": false,
      "credit_check": false,
      "debt_ratio": true,
      "max_loan": false,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": false,
      "returns_approved": false
    },
    "score": "4/10"
  },
  {
    "idea": "idea4-ast-bytecode",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "NodeTypes:\n  0 = tool-call\n  1 = branch\n  2 = return-ok\n  3 = return-err\n  4 = ref\n  5 = literal\n\nToolIDs:\n  0 = health-check\n  1 = create-snapshot\n  2 = roll-out\n  3 = restore-snapshot\n\nFieldIDs:\n  0 = service\n  1 = version\n  2 = environment\n  3 = status\n  4 = snapshot-id\n  5 = error\n  6 = healthy\n\nProgram:\n0 0 [0:input.0 2:input.2]\n1 [!4.6] 3 \"Service unhealthy\"\n0 1 [0:input.0 2:input.2]\n0 2 [0:input.0 1:input.1 2:input.2]\n1 [!4.3] 0 3 [4:4.4] 3 \"Deploy failed\"\n0 0 [0:input.0 2:input.2]\n1 [!4.6] 0 3 [4:4.4] 3 \"Deploy failed health check\"\n2 [0:input.0 1:input.1 2:input.2 4:4.4]",
    "prompt_tokens": 642,
    "output_tokens": 283,
    "elapsed_s": 3.12,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea5-workflow-dag",
    "test_type": "rules",
    "task": "workflow",
    "output": "name: transfer\ndescription: Transfer money between accounts\ninputs:\n  from_account:\n    type: text\n    description: Source account identifier\n  to_account:\n    type: text\n    description: Destination account identifier\n  amount:\n    type: number\n    description: Amount to transfer\noutputs:\n  result:\n    type: object\n    description: Transfer result with receipt or error\n\nsteps:\n  withdraw:\n    tool: withdraw\n    inputs:\n      account: $.from_account\n      amount: $.amount\n    catch:\n      - error_var: withdraw_error\n        next: return_withdraw_error\n\n  deposit:\n    tool: deposit\n    inputs:\n      account: $.to_account\n      amount: $.amount\n    catch:\n      - error_var: deposit_error\n        next: compensate_refund\n\n  compensate_refund:\n    tool: refund\n    inputs:\n      account: $.from_account\n      amount: $.amount\n    next: return_deposit_error\n\n  return_withdraw_error:\n    type: return\n    value:\n      success: false\n      error: $.withdraw_error\n\n  return_deposit_error:\n    type: return\n    value:\n      success: false\n      error: $.deposit_error\n\n  create_receipt:\n    type: transform\n    value:\n      from_account: $.from_account\n      to_account: $.to_account\n      amount: $.amount\n      withdraw_transaction_id: $.withdraw.transaction_id\n      deposit_transaction_id: $.deposit.transaction_id\n\n  return_success:\n    type: return\n    value:\n      success: true\n      receipt: $.create_receipt\n\ndag:\n  withdraw: []\n  deposit: [withdraw]\n  compensate_refund: [deposit]\n  return_withdraw_error: [withdraw]\n  return_deposit_error: [compensate_refund]\n  create_receipt: [deposit]\n  return_success: [create_receipt]",
    "prompt_tokens": 272,
    "output_tokens": 385,
    "elapsed_s": 3.17,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea5-workflow-dag",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "name: enrich\ndescription: Process and enrich orders with customer data and discounts\n\ninput:\n  orders:\n    type: array\n    description: List of orders with id, customer-id, and total\n\noutput:\n  enriched_orders:\n    type: array\n    description: List of enriched orders with customer data and calculated discounts\n\nsteps:\n  initialize:\n    action: pass\n    input:\n      orders: $.input.orders\n    output:\n      orders: $.orders\n\n  process_orders:\n    action: map\n    input:\n      items: $.initialize.orders\n      step: process_single_order\n    output:\n      results: $.results\n\n  process_single_order:\n    action: sequence\n    steps:\n      lookup_customer:\n        action: tool\n        tool: lookup-customer\n        input:\n          customer_id: $.item.customer-id\n        on_error:\n          action: return\n          value:\n            error: true\n            skipped: true\n        output:\n          customer: $.result\n\n      calculate_discount:\n        action: pass\n        input:\n          tier: $.lookup_customer.customer.tier\n        output:\n          discount_rate: |\n            {\n              \"gold\": 0.20,\n              \"silver\": 0.10\n            }[$.tier] || 0\n\n      apply_discount:\n        action: pass\n        input:\n          original_total: $.item.total\n          discount_rate: $.calculate_discount.discount_rate\n        output:\n          discount_amount: $.original_total * $.discount_rate\n          final_total: $.original_total * (1 - $.discount_rate)\n\n      enrich_order:\n        action: pass\n        input:\n          id: $.item.id\n          customer_name: $.lookup_customer.customer.name\n          customer_email: $.lookup_customer.customer.email\n          original_total: $.item.total\n          discount_amount: $.apply_discount.discount_amount\n          final_total: $.apply_discount.final_total\n        output:\n          enriched_order: $\n\n  filter_results:\n    action: filter\n    input:\n      items: $.process_orders.results\n      condition: $.item.error != true\n    output:\n      enriched_orders: $.items\n\n  return_results:\n    action: pass\n    input:\n      enriched_orders: $.filter_results.enriched_orders\n    output:\n      result: $.enriched_orders\n\nverification:\n  tools_used:\n    - lookup-customer\n  references:\n    - $.input.orders\n    - $.item.customer-id\n    - $.item.total\n    - $.item.id\n  all_paths_defined: true",
    "prompt_tokens": 266,
    "output_tokens": 518,
    "elapsed_s": 5.41,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea5-workflow-dag",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "workflow:\n  name: approve\n  description: Loan approval workflow\n  inputs:\n    income:\n      type: number\n      description: Annual income\n    debt:\n      type: number\n      description: Existing debt\n    score:\n      type: number\n      description: Credit score\n    amount:\n      type: number\n      description: Loan amount requested\n  outputs:\n    result:\n      type: object\n      description: Approval decision with details\n  steps:\n    check_credit_score:\n      tool: condition\n      inputs:\n        value: $.inputs.score\n        operator: lt\n        threshold: 500\n      onTrue:\n        - next: reject_low_score\n      onFalse:\n        - next: calculate_debt_ratio\n    reject_low_score:\n      tool: return\n      inputs:\n        result:\n          approved: false\n          reason: \"Credit score too low\"\n      outputs:\n        result: $.result\n    calculate_debt_ratio:\n      tool: arithmetic\n      inputs:\n        operation: divide\n        operand1: $.inputs.debt\n        operand2: $.inputs.income\n      onSuccess:\n        - next: check_debt_ratio\n      outputs:\n        ratio: $.result\n    check_debt_ratio:\n      tool: condition\n      inputs:\n        value: $.steps.calculate_debt_ratio.ratio\n        operator: gt\n        threshold: 0.4\n      onTrue:\n        - next: reject_high_debt\n      onFalse:\n        - next: calculate_max_loan\n    reject_high_debt:\n      tool: return\n      inputs:\n        result:\n          approved: false\n          reason: \"Debt ratio too high\"\n      outputs:\n        result: $.result\n    calculate_max_loan:\n      tool: arithmetic\n      inputs:\n        operation: multiply\n        operand1: $.inputs.income\n        operand2: 5\n      onSuccess:\n        - next: check_amount_limit\n      outputs:\n        maxLoan: $.result\n    check_amount_limit:\n      tool: condition\n      inputs:\n        value: $.inputs.amount\n        operator: gt\n        threshold: $.steps.calculate_max_loan.maxLoan\n      onTrue:\n        - next: reject_exceeds_limit\n      onFalse:\n        - next: determine_rate\n    reject_exceeds_limit:\n      tool: return\n      inputs:\n        result:\n          approved: false\n          reason: \"Amount exceeds limit\"\n      outputs:\n        result: $.result\n    determine_rate:\n      tool: condition\n      inputs:\n        value: $.inputs.score\n        operator: gt\n        threshold: 750\n      onTrue:\n        - next: set_rate_low\n      onFalse:\n        - next: check_score_medium\n    set_rate_low:\n      tool: assign\n      inputs:\n        rate: 3.5\n      outputs:\n        rate: $.rate\n      next: calculate_monthly_payment\n    check_score_medium:\n      tool: condition\n      inputs:\n        value: $.inputs.score\n        operator: gt\n        threshold: 650\n      onTrue:\n        - next: set_rate_medium\n      onFalse:\n        - next: set_rate_high\n    set_rate_medium:\n      tool: assign\n      inputs:\n        rate: 5.0\n      outputs:\n        rate: $.rate\n      next: calculate_monthly_payment\n    set_rate_high:\n      tool: assign\n      inputs:\n        rate: 7.5\n      outputs:\n        rate: $.rate\n      next: calculate_monthly_payment\n    calculate_monthly_payment:\n      tool: arithmetic\n      inputs:\n        operation: chain\n        steps:\n          - operation: multiply\n            operand1: $.inputs.amount\n            operand2: $.steps.determine_rate.rate\n          - operation: divide\n            operand1: $.previous\n            operand2: 100\n          - operation: divide\n            operand1: $.previous\n            operand2: 12\n      onSuccess:\n        - next: approve_loan\n      outputs:\n        monthlyPayment: $.result\n    approve_loan",
    "prompt_tokens": 320,
    "output_tokens": 843,
    "elapsed_s": 5.4,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": true,
      "returns_approved": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea5-workflow-dag",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "steps:\n  - name: health_check_pre\n    tool: health-check\n    inputs:\n      service: $.service\n      environment: $.environment\n    catch:\n      - error: \"*\"\n        return:\n          status: error\n          message: \"Service unhealthy\"\n\n  - name: create_snapshot\n    tool: create-snapshot\n    inputs:\n      service: $.service\n      environment: $.environment\n    outputs:\n      snapshot_id: $.snapshot-id\n\n  - name: rollout\n    tool: roll-out\n    inputs:\n      service: $.service\n      version: $.version\n      environment: $.environment\n    catch:\n      - error: \"*\"\n        steps:\n          - name: restore_after_rollout_failure\n            tool: restore-snapshot\n            inputs:\n              snapshot_id: $.create_snapshot.snapshot_id\n        return:\n          status: error\n          message: $.rollout.error\n\n  - name: health_check_post\n    tool: health-check\n    inputs:\n      service: $.service\n      environment: $.environment\n    catch:\n      - error: \"*\"\n        steps:\n          - name: restore_after_health_failure\n            tool: restore-snapshot\n            inputs:\n              snapshot_id: $.create_snapshot.snapshot_id\n        return:\n          status: error\n          message: \"Deploy failed health check\"\n\n  - name: success\n    return:\n      status: success\n      service: $.service\n      version: $.version\n      environment: $.environment\n      snapshot_id: $.create_snapshot.snapshot_id",
    "prompt_tokens": 322,
    "output_tokens": 314,
    "elapsed_s": 2.66,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea6-mcp-composition",
    "test_type": "rules",
    "task": "workflow",
    "output": "program transfer\n  input\n    from_account: text\n    to_account: text\n    amount: number\n  output\n    result: object\n\n  step withdraw_step\n    call mcp://banking/withdraw\n      account: from_account\n      amount: amount\n    on err\n      return {\n        success: false\n        error: err\n      }\n    capture withdraw_id from response.transaction_id\n\n  step deposit_step\n    call mcp://banking/deposit\n      account: to_account\n      amount: amount\n    on err\n      compensate refund_step\n      return {\n        success: false\n        error: err\n      }\n    capture deposit_id from response.transaction_id\n\n  step refund_step\n    call mcp://banking/refund\n      account: from_account\n      amount: amount\n\n  return {\n    success: true\n    receipt: {\n      from_account: from_account\n      to_account: to_account\n      amount: amount\n      withdraw_transaction_id: withdraw_id\n      deposit_transaction_id: deposit_id\n    }\n  }",
    "prompt_tokens": 302,
    "output_tokens": 221,
    "elapsed_s": 2.22,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea6-mcp-composition",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "program enrich\n  input orders: list<{id: string, customer-id: string, total: number}>\n  output enriched: list<{id: string, customer-id: string, customer-name: string, customer-email: string, original-total: number, discount-amount: number, final-total: number}>\n\n  enriched = []\n  \n  for each order in orders\n    step lookup\n      call mcp://lookup-customer with {customer-id: order.customer-id}\n      err: continue\n      output customer: {name: string, email: string, tier: string}\n    \n    step calculate-discount\n      input tier: customer.tier\n      discount-rate = match tier\n        \"gold\" -> 0.20\n        \"silver\" -> 0.10\n        default -> 0.0\n      discount-amount = order.total * discount-rate\n      final-total = order.total - discount-amount\n      output {discount-rate: number, discount-amount: number, final-total: number}\n    \n    step enrich-order\n      enriched-record = {\n        id: order.id,\n        customer-id: order.customer-id,\n        customer-name: customer.name,\n        customer-email: customer.email,\n        original-total: order.total,\n        discount-amount: calculate-discount.discount-amount,\n        final-total: calculate-discount.final-total\n      }\n      enriched.append(enriched-record)\n  \n  return enriched",
    "prompt_tokens": 296,
    "output_tokens": 292,
    "elapsed_s": 2.84,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": true,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": true,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea6-mcp-composition",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "```\nversion: 1.0\nname: approve\ndescription: Loan approval decision engine with composition and error handling\n\ninput:\n  type: object\n  properties:\n    income:\n      type: number\n      description: Annual income in dollars\n    debt:\n      type: number\n      description: Total existing debt in dollars\n    score:\n      type: number\n      description: Credit score (0-850)\n    amount:\n      type: number\n      description: Requested loan amount in dollars\n  required:\n    - income\n    - debt\n    - score\n    - amount\n\nsteps:\n  - id: validate_score\n    tool: mcp://validators/check_score\n    input:\n      score: $.score\n    output: score_result\n    err:\n      - status: \"rejected\"\n        reason: \"Credit score too low\"\n        min_required: 500\n\n  - id: calculate_dti\n    tool: mcp://calculators/debt_to_income\n    input:\n      debt: $.debt\n      income: $.income\n    output: dti_result\n    err:\n      - status: \"rejected\"\n        reason: \"Debt ratio too high\"\n        max_ratio: 0.4\n\n  - id: calculate_max_loan\n    tool: mcp://calculators/max_loan_amount\n    input:\n      income: $.income\n      multiplier: 5\n    output: max_loan_result\n    depends_on: [validate_score, calculate_dti]\n\n  - id: verify_amount\n    tool: mcp://validators/check_amount\n    input:\n      requested: $.amount\n      maximum: $.max_loan_result.max_loan\n    output: amount_result\n    err:\n      - status: \"rejected\"\n        reason: \"Amount exceeds limit\"\n\n  - id: calculate_rate\n    tool: mcp://calculators/determine_rate\n    input:\n      score: $.score\n    output: rate_result\n    depends_on: [verify_amount]\n\n  - id: calculate_payment\n    tool: mcp://calculators/monthly_payment\n    input:\n      principal: $.amount\n      annual_rate: $.rate_result.rate\n    output: payment_result\n    depends_on: [calculate_rate]\n\noutput:\n  type: object\n  properties:\n    status:\n      type: string\n      enum: [approved, rejected]\n    amount:\n      type: number\n    rate:\n      type: number\n    monthly_payment:\n      type: number\n    reason:\n      type: string\n  result:\n    status: \"approved\"\n    amount: $.amount\n    rate: $.rate_result.rate\n    monthly_payment: $.payment_result.monthly_payment\n\nerror_handling:\n  compensate:\n    - if: $.score_result.valid == false\n      action: \"reject\"\n      output:\n        status: \"rejected\"\n        reason: \"Credit score too low\"\n    \n    - if: $.dti_result.ratio > 0.4\n      action: \"reject\"\n      output:\n        status: \"rejected\"\n        reason: \"Debt ratio too high\"\n    \n    - if: $.amount > $.max_loan_result.max_loan\n      action: \"reject\"\n      output:\n        status: \"rejected\"\n        reason: \"Amount exceeds limit\"\n\nverification:\n  before_execution:\n    - resolve_all_uris: true\n    - check_types: true\n    - validate_inputs: true\n```",
    "prompt_tokens": 350,
    "output_tokens": 707,
    "elapsed_s": 5.01,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": false,
      "rate_values": false,
      "monthly_calc": false,
      "returns_approved": true
    },
    "score": "7/10"
  },
  {
    "idea": "idea6-mcp-composition",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "```\nprogram deploy(service: text, version: text, environment: text) -> {status: text, service?: text, version?: text, environment?: text, snapshot_id?: text, error?: text}\n\nstep health_check_pre:\n  call mcp://health-check with (service, environment)\n  err: return {status: \"error\", error: \"Service unhealthy\"}\n\nstep create_snapshot:\n  call mcp://create-snapshot with (service, environment)\n  bind snapshot_id = result.snapshot_id\n  err: return {status: \"error\", error: result.error}\n\nstep roll_out:\n  call mcp://roll-out with (service, version, environment)\n  err:\n    compensate:\n      call mcp://restore-snapshot with (snapshot_id)\n    return {status: \"error\", error: result.error}\n\nstep health_check_post:\n  call mcp://health-check with (service, environment)\n  err:\n    compensate:\n      call mcp://restore-snapshot with (snapshot_id)\n    return {status: \"error\", error: \"Deploy failed health check\"}\n\nstep success:\n  return {status: \"success\", service: service, version: version, environment: environment, snapshot_id: snapshot_id}\n```",
    "prompt_tokens": 352,
    "output_tokens": 253,
    "elapsed_s": 2.47,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea7-dense-wire",
    "test_type": "rules",
    "task": "workflow",
    "output": "transfer from to amt {\n  w=withdraw from amt;\n  w.error {return w.error};\n  d=deposit to amt;\n  d.error {\n    refund from amt;\n    return d.error\n  };\n  return {from:from;to:to;amount:amt;withdraw_id:w.id;deposit_id:d.id}\n}",
    "prompt_tokens": 273,
    "output_tokens": 69,
    "elapsed_s": 2.01,
    "features": {
      "named_transfer": true,
      "three_inputs": true,
      "calls_withdraw": true,
      "calls_deposit": true,
      "handles_withdraw_err": true,
      "handles_deposit_err": true,
      "compensates_refund": true,
      "refund_after_deposit": true,
      "returns_receipt": true,
      "receipt_has_both_ids": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea7-dense-wire",
    "test_type": "rules",
    "task": "data_pipeline",
    "output": "enrich orders {\n  result [];\n  orders each order {\n    cust lookup-customer order.customer-id;\n    cust.id empty? { continue; };\n    discount 0;\n    cust.tier \"gold\" == { discount order.total 0.2 *; };\n    cust.tier \"silver\" == { discount order.total 0.1 *; };\n    final order.total discount -;\n    enriched {\n      id order.id;\n      customer-name cust.name;\n      email cust.email;\n      original-total order.total;\n      discount-amount discount;\n      final-total final;\n    };\n    result result enriched push;\n  };\n  result;\n};",
    "prompt_tokens": 267,
    "output_tokens": 130,
    "elapsed_s": 2.03,
    "features": {
      "named_enrich": true,
      "takes_orders": true,
      "iterates": true,
      "calls_lookup": true,
      "handles_lookup_fail": false,
      "tier_check": true,
      "calculates_discount": true,
      "returns_list": false,
      "includes_final_total": true,
      "includes_customer_data": true
    },
    "score": "8/10"
  },
  {
    "idea": "idea7-dense-wire",
    "test_type": "rules",
    "task": "decision_logic",
    "output": "approve income debt score amount{if score<500{return{status:\"rejected\";reason:\"Credit score too low\"}};ratio=debt/income;if ratio>0.4{return{status:\"rejected\";reason:\"Debt ratio too high\"}};maxloan=income*5;if amount>maxloan{return{status:\"rejected\";reason:\"Amount exceeds limit\"}};rate=7.5;if score>750{rate=3.5};if score>650{rate=5.0};monthly=amount*rate/100/12;return{status:\"approved\";amount:amount;rate:rate;monthly:monthly}};",
    "prompt_tokens": 321,
    "output_tokens": 131,
    "elapsed_s": 1.42,
    "features": {
      "named_approve": true,
      "four_inputs": true,
      "credit_check": true,
      "debt_ratio": true,
      "max_loan": true,
      "three_rejections": true,
      "rate_tiers": true,
      "rate_values": true,
      "monthly_calc": true,
      "returns_approved": true
    },
    "score": "10/10"
  },
  {
    "idea": "idea7-dense-wire",
    "test_type": "rules",
    "task": "api_orchestration",
    "output": "deploy svc ver env {\n  hc=health-check svc env;\n  hc.healthy?{}{return{error:\"Service unhealthy\"}};\n  snap=create-snapshot svc env;\n  sid=snap.snapshot-id;\n  ro=roll-out svc ver env;\n  ro.success?{}{restore-snapshot sid;return{error:ro.error}};\n  hc2=health-check svc env;\n  hc2.healthy?{}{restore-snapshot sid;return{error:\"Deploy failed health check\"}};\n  return{status:\"success\";service:svc;version:ver;environment:env;snapshot-id:sid}\n};",
    "prompt_tokens": 323,
    "output_tokens": 127,
    "elapsed_s": 1.93,
    "features": {
      "named_deploy": true,
      "three_inputs": true,
      "calls_health": true,
      "calls_snapshot": true,
      "calls_rollout": true,
      "stores_snapshot_id": true,
      "handles_rollout_fail": true,
      "rollback_on_fail": true,
      "post_deploy_health": true,
      "returns_success": true
    },
    "score": "10/10"
  }
]