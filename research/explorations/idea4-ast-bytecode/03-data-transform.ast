; fn classify(spent:number) -> text
; Vars: 0=spent(input)

IF GTE REF 0 LIT 1 1000 1
  RET LIT 0 "gold"
IF GTE REF 0 LIT 1 500 1
  RET LIT 0 "silver"
RET LIT 0 "bronze"

; fn summaries(customers:list customer) -> list summary
; Tools: 0=classify
; Vars: 0=customers(input) 1=c 2=level 3=disc
; Fields: 0=spent 1=name 2=level 3=discount

FOR 1 REF 0 3
  LET 2 CALL 0 1 0 FIELD 1 0
  LET 3 MATCH_MAP REF 2 3 "gold" 20 "silver" 10 "bronze" 5
  OBJ 3 1 FIELD 1 1 2 REF 2 3 REF 3
