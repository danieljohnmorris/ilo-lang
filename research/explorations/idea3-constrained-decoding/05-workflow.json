{"fn":"checkout","in":{"payment-id":"text","amount":"num","items":"list item"},"out":"result receipt text","body":[{"let":"rid","call":"reserve","args":{"items":"items"},"err":"Inventory unavailable: ${err}"},{"let":"cid","call":"charge","args":{"payment-id":"payment-id","amount":"amount"},"err":"Payment failed: ${err}","compensate":[{"call":"release","args":{"reservation-id":"rid"}}]},{"let":"oid","call":"make-id"},{"ret":{"ok":{"order-id":"oid","charge-id":"cid","reservation-id":"rid"}}}]}
